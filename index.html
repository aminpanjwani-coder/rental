<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jamaat Rentals - Community Marketplace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        @keyframes blob {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        .animate-blob {
            animation: blob 7s infinite;
        }
        
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        
        .animation-delay-4000 {
            animation-delay: 4s;
        }

        .georgia-font {
            font-family: Georgia, serif;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // SVG Icons as functions
        const Icon = {
            Home: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>`,
            MapPin: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>`,
            Phone: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>`,
            Lock: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>`,
            Unlock: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>`,
            CheckCircle: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>`,
            Shield: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`,
            IndianRupee: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3h12"/><path d="M6 8h12"/><path d="m6 13 8.5 8"/><path d="M6 13h3"/><path d="M9 13c6.667 0 6.667-10 0-10"/></svg>`,
            ArrowRight: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>`,
            Search: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>`,
            Bed: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/></svg>`,
            Square: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/></svg>`,
            Calendar: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>`,
            User: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`,
            Building2: () => `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></svg>`
        };

        // Mock Data
        const mockListings = [
            {
                id: 1,
                bhk: 2,
                area: "Abids (Chirag Ali Lane)",
                rent: 15000,
                deposit: 30000,
                sqft: 1200,
                buildingName: "Al-Falah Apartments",
                flatNumber: "304",
                ownerName: "Zainab Merchant",
                ownerPhone: "+91 98765 43210",
                verified: true,
                availableFrom: "2026-03-01",
                furnishing: "Semi-Furnished",
                images: ["https://images.unsplash.com/photo-1502672260066-6bc36a50d686?w=800&q=80"]
            },
            {
                id: 2,
                bhk: 3,
                area: "Mehdipatnam (Happy Homes)",
                rent: 22000,
                deposit: 44000,
                sqft: 1650,
                buildingName: "Community Heights",
                flatNumber: "702",
                ownerName: "Husein Dhanani",
                ownerPhone: "+91 98765 43211",
                verified: true,
                availableFrom: "2026-02-20",
                furnishing: "Furnished",
                images: ["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800&q=80"]
            },
            {
                id: 3,
                bhk: 1,
                area: "Secunderabad (DV Colony)",
                rent: 12000,
                deposit: 24000,
                sqft: 850,
                buildingName: "Sunrise Tower",
                flatNumber: "201",
                ownerName: "Fatema Rajwani",
                ownerPhone: "+91 98765 43212",
                verified: true,
                availableFrom: "2026-03-15",
                furnishing: "Unfurnished",
                images: ["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&q=80"]
            },
            {
                id: 4,
                bhk: 4,
                area: "Kompally",
                rent: 35000,
                deposit: 70000,
                sqft: 2400,
                buildingName: "Royal Residency",
                flatNumber: "1001",
                ownerName: "Amir Virani",
                ownerPhone: "+91 98765 43213",
                verified: true,
                availableFrom: "2026-02-25",
                furnishing: "Fully Furnished",
                images: ["https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&q=80"]
            },
            {
                id: 5,
                bhk: 2,
                area: "Attapur",
                rent: 16500,
                deposit: 33000,
                sqft: 1100,
                buildingName: "Green Valley",
                flatNumber: "505",
                ownerName: "Tahera Nathani",
                ownerPhone: "+91 98765 43214",
                verified: true,
                availableFrom: "2026-03-10",
                furnishing: "Semi-Furnished",
                images: ["https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=800&q=80"]
            },
            {
                id: 6,
                bhk: 3,
                area: "Abids (Chirag Ali Lane)",
                rent: 24000,
                deposit: 48000,
                sqft: 1800,
                buildingName: "Heritage Plaza",
                flatNumber: "903",
                ownerName: "Karim Premji",
                ownerPhone: "+91 98765 43215",
                verified: true,
                availableFrom: "2026-02-28",
                furnishing: "Furnished",
                images: ["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&q=80"]
            }
        ];

        const HYDERABAD_AREAS = [
            "All Areas",
            "Abids (Chirag Ali Lane)",
            "Mehdipatnam (Happy Homes)",
            "Secunderabad (DV Colony)",
            "Kompally",
            "Attapur"
        ];

        const BHK_OPTIONS = ["All", "1 BHK", "2 BHK", "3 BHK", "4 BHK"];

        const PRICING_TIERS = {
            1: 1000,
            2: 1200,
            3: 1500,
            4: 2000
        };

        // State management
        let state = {
            currentPage: 'home',
            selectedListing: null,
            selectedArea: 'All Areas',
            selectedBHK: 'All',
            searchQuery: '',
            isUnlocked: false,
            formData: {
                bhk: '',
                buildingName: '',
                area: '',
                rent: '',
                deposit: '',
                sqft: '',
                furnishing: 'Unfurnished',
                availableFrom: '',
                ownerName: '',
                ownerPhone: ''
            },
            currentStep: 1
        };

        function setState(newState) {
            state = { ...state, ...newState };
            render();
        }

        // Helper to create SVG icon
        function createIcon(iconName, className = 'w-6 h-6') {
            return `<span class="${className}" style="display: inline-block;">${Icon[iconName]()}</span>`;
        }

        // Landing Page
        function renderLandingPage() {
            return `
                <div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100">
                    <!-- Decorative Background -->
                    <div class="relative overflow-hidden">
                        <div class="absolute inset-0 opacity-30">
                            <div class="absolute top-20 left-10 w-72 h-72 bg-blue-400 rounded-full mix-blend-multiply filter blur-3xl animate-blob"></div>
                            <div class="absolute top-40 right-10 w-72 h-72 bg-emerald-400 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-2000"></div>
                            <div class="absolute bottom-20 left-1/2 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl animate-blob animation-delay-4000"></div>
                        </div>

                        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32">
                            <!-- Logo/Brand -->
                            <div class="flex items-center gap-3 mb-16">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl flex items-center justify-center shadow-lg">
                                    ${createIcon('Home', 'w-7 h-7 text-white')}
                                </div>
                                <div>
                                    <h1 class="text-2xl font-bold text-slate-900 georgia-font">
                                        Jamaat Rentals
                                    </h1>
                                    <p class="text-sm text-slate-600">Hyderabad Community</p>
                                </div>
                            </div>

                            <!-- Hero Content -->
                            <div class="grid lg:grid-cols-2 gap-16 items-center">
                                <div class="space-y-8">
                                    <div class="space-y-4">
                                        <div class="inline-block px-4 py-2 bg-emerald-100 text-emerald-800 rounded-full text-sm font-semibold">
                                            ✓ Community-Verified Rentals
                                        </div>
                                        <h2 class="text-5xl lg:text-6xl font-bold text-slate-900 leading-tight georgia-font">
                                            Find Your Home Within Our 
                                            <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-blue-800">
                                                Community
                                            </span>
                                        </h2>
                                        <p class="text-xl text-slate-600 leading-relaxed">
                                            Zero brokerage. Direct connections. Verified Ismaili community members. 
                                            Your next home is just a conversation away.
                                        </p>
                                    </div>

                                    <!-- Trust Badges -->
                                    <div class="grid grid-cols-3 gap-6">
                                        <div class="text-center">
                                            <div class="w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-3">
                                                ${createIcon('Shield', 'w-8 h-8 text-blue-600')}
                                            </div>
                                            <p class="text-sm font-semibold text-slate-900">Community Verified</p>
                                            <p class="text-xs text-slate-500 mt-1">Members Only</p>
                                        </div>
                                        <div class="text-center">
                                            <div class="w-16 h-16 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-3">
                                                ${createIcon('IndianRupee', 'w-8 h-8 text-emerald-600')}
                                            </div>
                                            <p class="text-sm font-semibold text-slate-900">Zero Brokerage</p>
                                            <p class="text-xs text-slate-500 mt-1">Direct Contact</p>
                                        </div>
                                        <div class="text-center">
                                            <div class="w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-3">
                                                ${createIcon('CheckCircle', 'w-8 h-8 text-blue-600')}
                                            </div>
                                            <p class="text-sm font-semibold text-slate-900">Trusted Owners</p>
                                            <p class="text-xs text-slate-500 mt-1">Verified Listings</p>
                                        </div>
                                    </div>

                                    <!-- CTA Buttons -->
                                    <div class="flex flex-col sm:flex-row gap-4">
                                        <button
                                            onclick="navigateTo('browse')"
                                            class="group px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2"
                                        >
                                            Browse Listings
                                            ${createIcon('ArrowRight', 'w-5 h-5')}
                                        </button>
                                        <button
                                            onclick="navigateTo('list')"
                                            class="px-8 py-4 bg-white text-slate-900 rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 border-2 border-slate-200"
                                        >
                                            List Your Property
                                        </button>
                                    </div>
                                </div>

                                <!-- Hero Image -->
                                <div class="relative hidden lg:block">
                                    <div class="absolute inset-0 bg-gradient-to-br from-blue-600/20 to-emerald-600/20 rounded-3xl transform rotate-3"></div>
                                    <div class="relative bg-white rounded-3xl shadow-2xl p-8 transform -rotate-1">
                                        <img
                                            src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=600&q=80"
                                            alt="Beautiful apartment"
                                            class="w-full h-96 object-cover rounded-2xl"
                                        />
                                        <div class="mt-6 space-y-3">
                                            <div class="flex items-center justify-between">
                                                <div class="flex items-center gap-2">
                                                    <div class="w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center">
                                                        ${createIcon('CheckCircle', 'w-5 h-5 text-emerald-600')}
                                                    </div>
                                                    <div>
                                                        <p class="text-sm font-semibold text-slate-900">Community Verified</p>
                                                        <p class="text-xs text-slate-500">Trusted Member</p>
                                                    </div>
                                                </div>
                                                <div class="text-right">
                                                    <p class="text-2xl font-bold text-slate-900">₹15,000</p>
                                                    <p class="text-xs text-slate-500">per month</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Stats Section -->
                            <div class="mt-32 grid grid-cols-2 md:grid-cols-4 gap-8">
                                <div class="text-center">
                                    <p class="text-4xl font-bold text-slate-900 georgia-font">50+</p>
                                    <p class="text-sm text-slate-600 mt-2">Active Listings</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-4xl font-bold text-slate-900 georgia-font">200+</p>
                                    <p class="text-sm text-slate-600 mt-2">Community Members</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-4xl font-bold text-slate-900 georgia-font">100%</p>
                                    <p class="text-sm text-slate-600 mt-2">Verified Owners</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-4xl font-bold text-slate-900 georgia-font">Zero</p>
                                    <p class="text-sm text-slate-600 mt-2">Brokerage Fees</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- How It Works Section -->
                    <div class="bg-white py-24">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div class="text-center mb-16">
                                <h2 class="text-4xl font-bold text-slate-900 mb-4 georgia-font">
                                    How It Works
                                </h2>
                                <p class="text-xl text-slate-600">Simple, transparent, community-first</p>
                            </div>

                            <div class="grid md:grid-cols-3 gap-12">
                                <div class="text-center space-y-4">
                                    <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl flex items-center justify-center mx-auto shadow-lg">
                                        <span class="text-3xl font-bold text-white">1</span>
                                    </div>
                                    <h3 class="text-xl font-bold text-slate-900">Browse Listings</h3>
                                    <p class="text-slate-600">
                                        Explore verified properties listed by fellow community members across Hyderabad
                                    </p>
                                </div>

                                <div class="text-center space-y-4">
                                    <div class="w-20 h-20 bg-gradient-to-br from-emerald-500 to-emerald-700 rounded-2xl flex items-center justify-center mx-auto shadow-lg">
                                        <span class="text-3xl font-bold text-white">2</span>
                                    </div>
                                    <h3 class="text-xl font-bold text-slate-900">Unlock Details</h3>
                                    <p class="text-slate-600">
                                        Quick verification process to access owner contact information directly
                                    </p>
                                </div>

                                <div class="text-center space-y-4">
                                    <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl flex items-center justify-center mx-auto shadow-lg">
                                        <span class="text-3xl font-bold text-white">3</span>
                                    </div>
                                    <h3 class="text-xl font-bold text-slate-900">Connect & Move In</h3>
                                    <p class="text-slate-600">
                                        Contact owners directly, schedule visits, and finalize your new home
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Browse Listings Page
        function renderBrowseListings() {
            const filteredListings = mockListings.filter(listing => {
                const matchesArea = state.selectedArea === "All Areas" || listing.area === state.selectedArea;
                const matchesBHK = state.selectedBHK === "All" || listing.bhk === parseInt(state.selectedBHK.split(' ')[0]);
                const matchesSearch = listing.buildingName.toLowerCase().includes(state.searchQuery.toLowerCase()) ||
                                     listing.area.toLowerCase().includes(state.searchQuery.toLowerCase());
                return matchesArea && matchesBHK && matchesSearch;
            });

            return `
                <div class="min-h-screen bg-slate-50">
                    <!-- Header -->
                    <div class="bg-white border-b border-slate-200 sticky top-0 z-10 shadow-sm">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <div class="flex items-center justify-between">
                                <button
                                    onclick="navigateTo('home')"
                                    class="flex items-center gap-3 hover:opacity-80 transition-opacity"
                                >
                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg flex items-center justify-center">
                                        ${createIcon('Home', 'w-6 h-6 text-white')}
                                    </div>
                                    <span class="text-xl font-bold text-slate-900 georgia-font">
                                        Jamaat Rentals
                                    </span>
                                </button>
                                <button
                                    onclick="navigateTo('list')"
                                    class="px-6 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg font-semibold hover:shadow-lg transition-all"
                                >
                                    List Property
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <!-- Page Title -->
                        <div class="mb-8">
                            <h1 class="text-4xl font-bold text-slate-900 mb-2 georgia-font">
                                Available Rentals
                            </h1>
                            <p class="text-slate-600">
                                ${filteredListings.length} verified properties from community members
                            </p>
                        </div>

                        <!-- Filters -->
                        <div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
                            <div class="grid md:grid-cols-3 gap-4">
                                <!-- Search -->
                                <div class="relative">
                                    ${createIcon('Search', 'w-5 h-5 absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400')}
                                    <input
                                        type="text"
                                        placeholder="Search by building or area..."
                                        value="${state.searchQuery}"
                                        oninput="updateSearch(this.value)"
                                        class="w-full pl-12 pr-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                    />
                                </div>

                                <!-- Area Filter -->
                                <select
                                    value="${state.selectedArea}"
                                    onchange="updateArea(this.value)"
                                    class="px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors appearance-none bg-white cursor-pointer"
                                >
                                    ${HYDERABAD_AREAS.map(area => `<option value="${area}" ${state.selectedArea === area ? 'selected' : ''}>${area}</option>`).join('')}
                                </select>

                                <!-- BHK Filter -->
                                <select
                                    value="${state.selectedBHK}"
                                    onchange="updateBHK(this.value)"
                                    class="px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors appearance-none bg-white cursor-pointer"
                                >
                                    ${BHK_OPTIONS.map(bhk => `<option value="${bhk}" ${state.selectedBHK === bhk ? 'selected' : ''}>${bhk}</option>`).join('')}
                                </select>
                            </div>
                        </div>

                        <!-- Listings Grid -->
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${filteredListings.map(listing => `
                                <div
                                    onclick="selectListing(${listing.id})"
                                    class="group bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer transform hover:scale-105"
                                >
                                    <!-- Image -->
                                    <div class="relative h-56 overflow-hidden">
                                        <img
                                            src="${listing.images[0]}"
                                            alt="${listing.buildingName}"
                                            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                                        />
                                        ${listing.verified ? `
                                            <div class="absolute top-4 right-4 bg-emerald-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1 shadow-lg">
                                                ${createIcon('CheckCircle', 'w-3 h-3')}
                                                Verified
                                            </div>
                                        ` : ''}
                                        <div class="absolute top-4 left-4 bg-white/95 backdrop-blur-sm px-3 py-1 rounded-full text-sm font-bold text-slate-900">
                                            ${listing.bhk} BHK
                                        </div>
                                    </div>

                                    <!-- Content -->
                                    <div class="p-6 space-y-4">
                                        <div>
                                            <h3 class="text-xl font-bold text-slate-900 mb-1">
                                                ${listing.buildingName}
                                            </h3>
                                            <div class="flex items-center gap-1 text-slate-600">
                                                ${createIcon('MapPin', 'w-4 h-4')}
                                                <span class="text-sm">${listing.area}</span>
                                            </div>
                                        </div>

                                        <!-- Details -->
                                        <div class="flex items-center gap-4 text-sm text-slate-600">
                                            <div class="flex items-center gap-1">
                                                ${createIcon('Square', 'w-4 h-4')}
                                                <span>${listing.sqft} sqft</span>
                                            </div>
                                            <div class="flex items-center gap-1">
                                                ${createIcon('Bed', 'w-4 h-4')}
                                                <span>${listing.furnishing}</span>
                                            </div>
                                        </div>

                                        <!-- Pricing -->
                                        <div class="pt-4 border-t border-slate-100 flex items-center justify-between">
                                            <div>
                                                <p class="text-2xl font-bold text-slate-900">
                                                    ₹${listing.rent.toLocaleString()}
                                                </p>
                                                <p class="text-xs text-slate-500">per month</p>
                                            </div>
                                            <div class="px-4 py-2 bg-blue-50 text-blue-700 rounded-lg font-semibold text-sm">
                                                View Details
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>

                        ${filteredListings.length === 0 ? `
                            <div class="text-center py-16">
                                <div class="w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    ${createIcon('Search', 'w-12 h-12 text-slate-400')}
                                </div>
                                <h3 class="text-xl font-bold text-slate-900 mb-2">No listings found</h3>
                                <p class="text-slate-600">Try adjusting your filters or search criteria</p>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Property Detail Page (with unlock functionality)
        function renderPropertyDetail() {
            const listing = state.selectedListing;
            if (!listing) return '';

            return `
                <div class="min-h-screen bg-slate-50">
                    <!-- Header -->
                    <div class="bg-white border-b border-slate-200 sticky top-0 z-10 shadow-sm">
                        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <button
                                onclick="navigateTo('browse')"
                                class="flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors"
                            >
                                <span style="transform: rotate(180deg); display: inline-block;">
                                    ${createIcon('ArrowRight', 'w-5 h-5')}
                                </span>
                                <span class="font-semibold">Back to Listings</span>
                            </button>
                        </div>
                    </div>

                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <div class="grid lg:grid-cols-3 gap-8">
                            <!-- Main Content -->
                            <div class="lg:col-span-2 space-y-8">
                                <!-- Images -->
                                <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                                    <img
                                        src="${listing.images[0]}"
                                        alt="${listing.buildingName}"
                                        class="w-full h-96 object-cover"
                                    />
                                </div>

                                <!-- Property Details -->
                                <div class="bg-white rounded-2xl shadow-lg p-8 space-y-6">
                                    <div class="flex items-start justify-between">
                                        <div>
                                            <h1 class="text-3xl font-bold text-slate-900 mb-2 georgia-font">
                                                ${listing.buildingName}
                                            </h1>
                                            <div class="flex items-center gap-2 text-slate-600">
                                                ${createIcon('MapPin', 'w-5 h-5')}
                                                <span class="text-lg">${listing.area}</span>
                                            </div>
                                        </div>
                                        ${listing.verified ? `
                                            <div class="bg-emerald-100 text-emerald-700 px-4 py-2 rounded-full text-sm font-semibold flex items-center gap-2">
                                                ${createIcon('CheckCircle', 'w-4 h-4')}
                                                Verified
                                            </div>
                                        ` : ''}
                                    </div>

                                    <!-- Key Details Grid -->
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 pt-6 border-t border-slate-200">
                                        <div>
                                            <p class="text-sm text-slate-500 mb-1">BHK</p>
                                            <p class="text-2xl font-bold text-slate-900">${listing.bhk}</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-slate-500 mb-1">Area</p>
                                            <p class="text-2xl font-bold text-slate-900">${listing.sqft} sqft</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-slate-500 mb-1">Rent</p>
                                            <p class="text-2xl font-bold text-slate-900">₹${listing.rent.toLocaleString()}</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-slate-500 mb-1">Deposit</p>
                                            <p class="text-2xl font-bold text-slate-900">₹${listing.deposit.toLocaleString()}</p>
                                        </div>
                                    </div>

                                    <!-- Additional Details -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-6 border-t border-slate-200">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                                ${createIcon('Bed', 'w-5 h-5 text-blue-600')}
                                            </div>
                                            <div>
                                                <p class="text-sm text-slate-500">Furnishing</p>
                                                <p class="font-semibold text-slate-900">${listing.furnishing}</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center">
                                                ${createIcon('Calendar', 'w-5 h-5 text-emerald-600')}
                                            </div>
                                            <div>
                                                <p class="text-sm text-slate-500">Available From</p>
                                                <p class="font-semibold text-slate-900">
                                                    ${new Date(listing.availableFrom).toLocaleDateString('en-IN', { 
                                                        day: 'numeric', 
                                                        month: 'short', 
                                                        year: 'numeric' 
                                                    })}
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Sidebar -->
                            <div class="space-y-6">
                                <!-- Contact Card -->
                                <div class="bg-white rounded-2xl shadow-lg p-6 sticky top-24">
                                    <h3 class="text-xl font-bold text-slate-900 mb-6">Owner Details</h3>

                                    ${!state.isUnlocked ? `
                                        <div class="space-y-6">
                                            <!-- Locked Info -->
                                            <div class="bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-6 space-y-4">
                                                <div class="flex items-center gap-3">
                                                    <div class="w-12 h-12 bg-slate-200 rounded-full flex items-center justify-center">
                                                        ${createIcon('Lock', 'w-6 h-6 text-slate-400')}
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-semibold text-slate-400">Flat Number</p>
                                                        <p class="text-slate-300">•••</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-center gap-3">
                                                    <div class="w-12 h-12 bg-slate-200 rounded-full flex items-center justify-center">
                                                        ${createIcon('Lock', 'w-6 h-6 text-slate-400')}
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-semibold text-slate-400">Owner Name</p>
                                                        <p class="text-slate-300">•••••••</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-center gap-3">
                                                    <div class="w-12 h-12 bg-slate-200 rounded-full flex items-center justify-center">
                                                        ${createIcon('Lock', 'w-6 h-6 text-slate-400')}
                                                    </div>
                                                    <div class="flex-1">
                                                        <p class="font-semibold text-slate-400">Phone Number</p>
                                                        <p class="text-slate-300">+91 ••••• •••••</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Unlock Button -->
                                            <button
                                                onclick="unlockContact()"
                                                class="w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2"
                                            >
                                                ${createIcon('Unlock', 'w-5 h-5')}
                                                Unlock Contact Details
                                            </button>

                                            <!-- Verification Info -->
                                            <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                                                <div class="flex items-start gap-3">
                                                    ${createIcon('Shield', 'w-5 h-5 text-blue-600 mt-0.5')}
                                                    <div>
                                                        <p class="text-sm font-semibold text-blue-900 mb-1">
                                                            Community Verification
                                                        </p>
                                                        <p class="text-xs text-blue-700 leading-relaxed">
                                                            Contact details are shared after verification to ensure safety 
                                                            and maintain trust within our community.
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ` : `
                                        <div class="space-y-6">
                                            <!-- Unlocked Info -->
                                            <div class="space-y-4">
                                                <div class="flex items-center gap-3">
                                                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                                        ${createIcon('Building2', 'w-6 h-6 text-blue-600')}
                                                    </div>
                                                    <div>
                                                        <p class="text-sm text-slate-500">Flat Number</p>
                                                        <p class="font-semibold text-slate-900">${listing.flatNumber}</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-center gap-3">
                                                    <div class="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center">
                                                        ${createIcon('User', 'w-6 h-6 text-emerald-600')}
                                                    </div>
                                                    <div>
                                                        <p class="text-sm text-slate-500">Owner Name</p>
                                                        <p class="font-semibold text-slate-900">${listing.ownerName}</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-center gap-3">
                                                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                                        ${createIcon('Phone', 'w-6 h-6 text-blue-600')}
                                                    </div>
                                                    <div>
                                                        <p class="text-sm text-slate-500">Phone Number</p>
                                                        <p class="font-semibold text-slate-900">${listing.ownerPhone}</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Contact Button -->
                                            <button
                                                onclick="contactOwner()"
                                                class="w-full px-6 py-4 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2"
                                            >
                                                ${createIcon('Phone', 'w-5 h-5')}
                                                Contact on WhatsApp
                                            </button>
                                        </div>
                                    `}
                                </div>

                                <!-- Pricing Breakdown -->
                                <div class="bg-white rounded-2xl shadow-lg p-6">
                                    <h3 class="text-lg font-bold text-slate-900 mb-4">Pricing Breakdown</h3>
                                    <div class="space-y-3">
                                        <div class="flex justify-between">
                                            <span class="text-slate-600">Monthly Rent</span>
                                            <span class="font-semibold text-slate-900">₹${listing.rent.toLocaleString()}</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-slate-600">Security Deposit</span>
                                            <span class="font-semibold text-slate-900">₹${listing.deposit.toLocaleString()}</span>
                                        </div>
                                        <div class="flex justify-between pt-3 border-t border-slate-200">
                                            <span class="text-slate-600">Brokerage Fee</span>
                                            <span class="font-bold text-emerald-600">₹0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // List Property Form
        function renderListPropertyForm() {
            const listingFee = state.formData.bhk ? PRICING_TIERS[parseInt(state.formData.bhk)] : 0;

            return `
                <div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100">
                    <!-- Header -->
                    <div class="bg-white/80 backdrop-blur-lg border-b border-slate-200 sticky top-0 z-10 shadow-sm">
                        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <button
                                onclick="navigateTo('home')"
                                class="flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors"
                            >
                                <span style="transform: rotate(180deg); display: inline-block;">
                                    ${createIcon('ArrowRight', 'w-5 h-5')}
                                </span>
                                <span class="font-semibold">Back to Home</span>
                            </button>
                        </div>
                    </div>

                    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                        <!-- Header -->
                        <div class="text-center mb-12">
                            <h1 class="text-4xl font-bold text-slate-900 mb-4 georgia-font">
                                List Your Property
                            </h1>
                            <p class="text-lg text-slate-600">
                                Connect with trusted community members looking for a home
                            </p>
                        </div>

                        <!-- Progress Steps -->
                        <div class="mb-12">
                            <div class="flex items-center justify-between max-w-2xl mx-auto">
                                ${[1, 2, 3].map(step => `
                                    <div class="flex flex-col items-center">
                                        <div class="${state.currentStep >= step ? 'bg-gradient-to-br from-blue-600 to-blue-700 text-white shadow-lg' : 'bg-slate-200 text-slate-400'} w-12 h-12 rounded-full flex items-center justify-center font-bold transition-all duration-300">
                                            ${step}
                                        </div>
                                        <p class="${state.currentStep >= step ? 'text-blue-600' : 'text-slate-400'} text-sm mt-2 font-semibold">
                                            ${step === 1 ? 'Property' : step === 2 ? 'Pricing' : 'Contact'}
                                        </p>
                                    </div>
                                    ${step < 3 ? `<div class="${state.currentStep > step ? 'bg-blue-600' : 'bg-slate-200'} flex-1 h-1 mx-4 rounded transition-all duration-300"></div>` : ''}
                                `).join('')}
                            </div>
                        </div>

                        <!-- Form -->
                        <div class="bg-white rounded-2xl shadow-2xl p-8 md:p-12">
                            ${state.currentStep === 1 ? `
                                <div class="space-y-6">
                                    <h2 class="text-2xl font-bold text-slate-900 mb-6">Property Details</h2>
                                    
                                    <div class="grid md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-semibold text-slate-700 mb-2">
                                                BHK Configuration *
                                            </label>
                                            <select
                                                value="${state.formData.bhk}"
                                                onchange="updateFormField('bhk', this.value)"
                                                class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                            >
                                                <option value="">Select BHK</option>
                                                <option value="1">1 BHK</option>
                                                <option value="2">2 BHK</option>
                                                <option value="3">3 BHK</option>
                                                <option value="4">4 BHK</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label class="block text-sm font-semibold text-slate-700 mb-2">
                                                Area (sqft) *
                                            </label>
                                            <input
                                                type="number"
                                                value="${state.formData.sqft}"
                                                oninput="updateFormField('sqft', this.value)"
                                                placeholder="e.g., 1200"
                                                class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                            />
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                                            Building/Society Name *
                                        </label>
                                        <input
                                            type="text"
                                            value="${state.formData.buildingName}"
                                            oninput="updateFormField('buildingName', this.value)"
                                            placeholder="e.g., Al-Falah Apartments"
                                            class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                        />
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                                            Location *
                                        </label>
                                        <select
                                            value="${state.formData.area}"
                                            onchange="updateFormField('area', this.value)"
                                            class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                        >
                                            <option value="">Select Area</option>
                                            ${HYDERABAD_AREAS.filter(a => a !== "All Areas").map(area => `
                                                <option value="${area}">${area}</option>
                                            `).join('')}
                                        </select>
                                    </div>
                                </div>
                            ` : state.currentStep === 2 ? `
                                <div class="space-y-6">
                                    <h2 class="text-2xl font-bold text-slate-900 mb-6">Pricing & Availability</h2>
                                    
                                    <div class="grid md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-semibold text-slate-700 mb-2">
                                                Monthly Rent (₹) *
                                            </label>
                                            <input
                                                type="number"
                                                value="${state.formData.rent}"
                                                oninput="updateFormField('rent', this.value)"
                                                placeholder="e.g., 15000"
                                                class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                            />
                                        </div>

                                        <div>
                                            <label class="block text-sm font-semibold text-slate-700 mb-2">
                                                Security Deposit (₹) *
                                            </label>
                                            <input
                                                type="number"
                                                value="${state.formData.deposit}"
                                                oninput="updateFormField('deposit', this.value)"
                                                placeholder="Auto-calculated"
                                                class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors bg-slate-50"
                                            />
                                            <p class="text-xs text-slate-500 mt-1">Typically 2x monthly rent</p>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                                            Furnishing Status *
                                        </label>
                                        <div class="grid grid-cols-3 gap-4">
                                            ${['Unfurnished', 'Semi-Furnished', 'Fully Furnished'].map(option => `
                                                <button
                                                    type="button"
                                                    onclick="updateFormField('furnishing', '${option}')"
                                                    class="${state.formData.furnishing === option ? 'bg-blue-600 text-white shadow-lg' : 'bg-slate-100 text-slate-700 hover:bg-slate-200'} px-4 py-3 rounded-xl font-semibold transition-all"
                                                >
                                                    ${option}
                                                </button>
                                            `).join('')}
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                                            Available From *
                                        </label>
                                        <input
                                            type="date"
                                            value="${state.formData.availableFrom}"
                                            onchange="updateFormField('availableFrom', this.value)"
                                            class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                        />
                                    </div>
                                </div>
                            ` : `
                                <div class="space-y-6">
                                    <h2 class="text-2xl font-bold text-slate-900 mb-6">Contact Information</h2>
                                    
                                    <div>
                                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                                            Your Name *
                                        </label>
                                        <input
                                            type="text"
                                            value="${state.formData.ownerName}"
                                            oninput="updateFormField('ownerName', this.value)"
                                            placeholder="Full name"
                                            class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                        />
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                                            WhatsApp Number *
                                        </label>
                                        <input
                                            type="tel"
                                            value="${state.formData.ownerPhone}"
                                            oninput="updateFormField('ownerPhone', this.value)"
                                            placeholder="+91 98765 43210"
                                            class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-0 outline-none transition-colors"
                                        />
                                        <p class="text-xs text-slate-500 mt-1">
                                            Interested tenants will contact you on WhatsApp
                                        </p>
                                    </div>

                                    <!-- Listing Fee Breakdown -->
                                    <div class="bg-gradient-to-br from-blue-50 to-emerald-50 rounded-xl p-6 border-2 border-blue-200">
                                        <h3 class="text-lg font-bold text-slate-900 mb-4">Listing Summary</h3>
                                        <div class="space-y-3">
                                            <div class="flex justify-between">
                                                <span class="text-slate-700">Property Type</span>
                                                <span class="font-semibold text-slate-900">${state.formData.bhk} BHK</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-slate-700">Monthly Rent</span>
                                                <span class="font-semibold text-slate-900">₹${parseFloat(state.formData.rent || 0).toLocaleString()}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-slate-700">Listing Duration</span>
                                                <span class="font-semibold text-slate-900">30 Days</span>
                                            </div>
                                            <div class="flex justify-between pt-3 border-t-2 border-blue-300">
                                                <span class="font-bold text-slate-900">Listing Fee</span>
                                                <span class="text-2xl font-bold text-blue-600">₹${listingFee}</span>
                                            </div>
                                        </div>
                                        <p class="text-xs text-slate-600 mt-4 leading-relaxed">
                                            * One-time fee for 30-day active listing. Payment details will be shared via WhatsApp.
                                        </p>
                                    </div>
                                </div>
                            `}

                            <!-- Navigation Buttons -->
                            <div class="flex items-center justify-between mt-12 pt-8 border-t border-slate-200">
                                <button
                                    onclick="previousStep()"
                                    ${state.currentStep === 1 ? 'disabled' : ''}
                                    class="${state.currentStep === 1 ? 'bg-slate-100 text-slate-400 cursor-not-allowed' : 'bg-slate-200 text-slate-700 hover:bg-slate-300'} px-6 py-3 rounded-xl font-semibold transition-all"
                                >
                                    Previous
                                </button>

                                ${state.currentStep < 3 ? `
                                    <button
                                        onclick="nextStep()"
                                        class="${isStepValid() ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105' : 'bg-slate-200 text-slate-400 cursor-not-allowed'} px-8 py-3 rounded-xl font-semibold transition-all flex items-center gap-2"
                                        ${!isStepValid() ? 'disabled' : ''}
                                    >
                                        Continue
                                        ${createIcon('ArrowRight', 'w-5 h-5')}
                                    </button>
                                ` : `
                                    <button
                                        onclick="submitListing()"
                                        class="${isStepValid() ? 'bg-gradient-to-r from-emerald-600 to-emerald-700 text-white shadow-lg hover:shadow-xl transform hover:scale-105' : 'bg-slate-200 text-slate-400 cursor-not-allowed'} px-8 py-3 rounded-xl font-semibold transition-all flex items-center gap-2"
                                        ${!isStepValid() ? 'disabled' : ''}
                                    >
                                        Submit Listing
                                        ${createIcon('CheckCircle', 'w-5 h-5')}
                                    </button>
                                `}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Main render function
        function render() {
            const app = document.getElementById('app');
            let html = '';

            switch (state.currentPage) {
                case 'home':
                    html = renderLandingPage();
                    break;
                case 'browse':
                    html = renderBrowseListings();
                    break;
                case 'detail':
                    html = renderPropertyDetail();
                    break;
                case 'list':
                    html = renderListPropertyForm();
                    break;
            }

            app.innerHTML = html;
            window.scrollTo(0, 0);
        }

        // Navigation functions
        function navigateTo(page) {
            setState({ currentPage: page, isUnlocked: false });
        }

        function selectListing(id) {
            const listing = mockListings.find(l => l.id === id);
            setState({ selectedListing: listing, currentPage: 'detail', isUnlocked: false });
        }

        function unlockContact() {
            setState({ isUnlocked: true });
        }

        function contactOwner() {
            const listing = state.selectedListing;
            const message = `Assalamu Alaikum! I found your ${listing.bhk} BHK property at ${listing.buildingName}, ${listing.area} on Jamaat Rentals. I'm interested in learning more about it.`;
            const whatsappUrl = `https://wa.me/${listing.ownerPhone.replace(/\s+/g, '')}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Filter functions
        function updateSearch(value) {
            setState({ searchQuery: value });
        }

        function updateArea(value) {
            setState({ selectedArea: value });
        }

        function updateBHK(value) {
            setState({ selectedBHK: value });
        }

        // Form functions
        function updateFormField(field, value) {
            const newFormData = { ...state.formData, [field]: value };
            
            // Auto-calculate deposit
            if (field === 'rent' && value) {
                newFormData.deposit = (parseFloat(value) * 2).toString();
            }
            
            setState({ formData: newFormData });
        }

        function isStepValid() {
            const { bhk, buildingName, area, sqft, rent, deposit, furnishing, availableFrom, ownerName, ownerPhone } = state.formData;
            
            switch (state.currentStep) {
                case 1:
                    return bhk && buildingName && area && sqft;
                case 2:
                    return rent && deposit && furnishing && availableFrom;
                case 3:
                    return ownerName && ownerPhone;
                default:
                    return false;
            }
        }

        function nextStep() {
            if (isStepValid()) {
                setState({ currentStep: state.currentStep + 1 });
            }
        }

        function previousStep() {
            if (state.currentStep > 1) {
                setState({ currentStep: state.currentStep - 1 });
            }
        }

        function submitListing() {
            if (!isStepValid()) return;
            
            const listingFee = PRICING_TIERS[parseInt(state.formData.bhk)] || 0;
            const message = `🏠 *New Property Listing Request*

*Property Details:*
• BHK: ${state.formData.bhk}
• Building: ${state.formData.buildingName}
• Area: ${state.formData.area}
• Size: ${state.formData.sqft} sqft
• Furnishing: ${state.formData.furnishing}

*Pricing:*
• Monthly Rent: ₹${parseFloat(state.formData.rent).toLocaleString()}
• Security Deposit: ₹${parseFloat(state.formData.deposit).toLocaleString()}

*Owner Details:*
• Name: ${state.formData.ownerName}
• Phone: ${state.formData.ownerPhone}
• Available From: ${state.formData.availableFrom}

*Listing Fee: ₹${listingFee}* (30-day listing)

Please confirm to activate this listing.`;

            const whatsappUrl = `https://wa.me/919876543210?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Initial render
        render();
    </script>
</body>
</html>
